{"ast":null,"code":"var _jsxFileName = \"/Users/hail/Documents/project/leod/src/components/Upload/upload.tsx\";\nimport React, { useRef } from 'react';\nimport axios from 'axios';\nimport Button from '../Button/button';\nexport const Upload = props => {\n  const {\n    action,\n    onProgress,\n    onSuccess,\n    onError\n  } = props;\n  const fileRef = useRef(null);\n\n  const HandleClick = () => {\n    if (fileRef.current) {\n      fileRef.current.click();\n    }\n  };\n\n  const handleChange = e => {\n    const files = e.target.files;\n\n    if (!files) {\n      return;\n    }\n\n    uploadFiles(files);\n  };\n\n  const uploadFiles = files => {\n    let postFiles = Array.from(files);\n    postFiles.forEach(file => {\n      const formData = new FormData();\n      formData.append(file.name, file);\n      axios.post(action, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: e => {\n          let percentage = Math.round(e.loaded * 100 / e.total) || 0;\n\n          if (onProgress && percentage < 100) {\n            onProgress(percentage, file);\n          }\n        }\n      }).then(data => {\n        if (onSuccess) {\n          onSuccess(data, file);\n        }\n\n        console.log(data);\n      }).catch(err => {\n        if (onError) {\n          onError(err, file);\n        }\n\n        console.log(err);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"leod-upload-component\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: HandleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, \"upload File\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    ref: fileRef,\n    className: \"leod-file-input\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }));\n};\nUpload.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"Upload\"\n};\nexport default Upload;\n\ntry {\n  // @ts-ignore\n  Upload.displayName = \"Upload\"; // @ts-ignore\n\n  Upload.__docgenInfo = {\n    \"description\": \"\",\n    \"displayName\": \"Upload\",\n    \"props\": {\n      \"action\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"action\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"string\"\n        }\n      },\n      \"onProgress\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onProgress\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(percentage: number, file: File) => void\"\n        }\n      },\n      \"onSuccess\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onSuccess\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(data: any, file: File) => void\"\n        }\n      },\n      \"onError\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onError\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(data: any, file: File) => void\"\n        }\n      },\n      \"beforeUpload\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"beforeUpload\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"(file: File) => boolean | Promise<File>\"\n        }\n      },\n      \"onChange\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onChange\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(file: File) => void\"\n        }\n      }\n    }\n  }; // @ts-ignore\n\n  if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") // @ts-ignore\n    STORYBOOK_REACT_CLASSES[\"src/components/Upload/upload.tsx#Upload\"] = {\n      docgenInfo: Upload.__docgenInfo,\n      name: \"Upload\",\n      path: \"src/components/Upload/upload.tsx#Upload\"\n    };\n} catch (__react_docgen_typescript_loader_error) {}\n\ntry {\n  // @ts-ignore\n  upload.displayName = \"upload\"; // @ts-ignore\n\n  upload.__docgenInfo = {\n    \"description\": \"\",\n    \"displayName\": \"upload\",\n    \"props\": {\n      \"action\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"action\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"string\"\n        }\n      },\n      \"onProgress\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onProgress\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(percentage: number, file: File) => void\"\n        }\n      },\n      \"onSuccess\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onSuccess\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(data: any, file: File) => void\"\n        }\n      },\n      \"onError\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onError\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(data: any, file: File) => void\"\n        }\n      },\n      \"beforeUpload\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"beforeUpload\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"(file: File) => boolean | Promise<File>\"\n        }\n      },\n      \"onChange\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onChange\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(file: File) => void\"\n        }\n      }\n    }\n  }; // @ts-ignore\n\n  if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") // @ts-ignore\n    STORYBOOK_REACT_CLASSES[\"src/components/Upload/upload.tsx#upload\"] = {\n      docgenInfo: upload.__docgenInfo,\n      name: \"upload\",\n      path: \"src/components/Upload/upload.tsx#upload\"\n    };\n} catch (__react_docgen_typescript_loader_error) {}\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src/components/Upload/upload.tsx\"] = {\n    name: \"Upload\",\n    docgenInfo: Upload.__docgenInfo,\n    path: \"src/components/Upload/upload.tsx\"\n  };\n}","map":{"version":3,"sources":["/Users/hail/Documents/project/leod/src/components/Upload/upload.tsx"],"names":["Upload","props","onError","fileRef","useRef","HandleClick","handleChange","e","files","uploadFiles","postFiles","Array","file","formData","axios","headers","onUploadProgress","percentage","Math","onProgress","data","onSuccess","console","err","STORYBOOK_REACT_CLASSES","docgenInfo","name","path","upload"],"mappings":"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","sourcesContent":["import React, { FC, ChangeEvent, useRef } from 'react'\n\nimport axios from 'axios'\nimport Button from '../Button/button'\n\ninterface UploadProps {\n  action: string,\n  onProgress?: (percentage: number, file: File) => void,\n  onSuccess?: (data: any, file: File) => void,\n  onError?: (data: any, file: File) => void,\n  beforeUpload: (file: File) => boolean | Promise<File>\n  onChange?: (file: File) => void\n\n}\nexport const Upload: FC<UploadProps> = (props) => {\n  const {\n    action,\n    onProgress,\n    onSuccess,\n    onError,\n  } = props\n\n  const fileRef = useRef<HTMLInputElement>(null)\n\n  const HandleClick = () => {\n    if (fileRef.current) {\n      fileRef.current.click()\n    }\n  }\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files\n    if (!files) {\n      return\n    }\n    uploadFiles(files)\n\n  }\n  const uploadFiles = (files: FileList) => {\n    let postFiles = Array.from(files)\n    postFiles.forEach(file => {\n      const formData = new FormData()\n      formData.append(file.name, file)\n      axios.post(action, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: (e: ProgressEvent) => {\n          let percentage = Math.round(e.loaded * 100 / e.total) || 0\n          if (onProgress && percentage < 100) {\n            onProgress(percentage, file)\n          }\n        }\n      }).then((data: any) => {\n        if (onSuccess) {\n          onSuccess(data, file)\n        }\n        console.log(data)\n      }).catch((err: any) => {\n        if (onError) {\n          onError(err, file)\n        }\n        console.log(err)\n      })\n    })\n\n  }\n  return <div className=\"leod-upload-component\">\n    <Button onClick={HandleClick}>upload File</Button>\n    <input\n      type=\"file\"\n      ref={fileRef}\n      className=\"leod-file-input\"\n      onChange={handleChange} />\n  </div>\n}\n\n\nexport default Upload\ntry {\n    // @ts-ignore\n    Upload.displayName = \"Upload\";\n    // @ts-ignore\n    Upload.__docgenInfo = { \"description\": \"\", \"displayName\": \"Upload\", \"props\": { \"action\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"action\", \"required\": true, \"type\": { \"name\": \"string\" } }, \"onProgress\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onProgress\", \"required\": false, \"type\": { \"name\": \"(percentage: number, file: File) => void\" } }, \"onSuccess\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onSuccess\", \"required\": false, \"type\": { \"name\": \"(data: any, file: File) => void\" } }, \"onError\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onError\", \"required\": false, \"type\": { \"name\": \"(data: any, file: File) => void\" } }, \"beforeUpload\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"beforeUpload\", \"required\": true, \"type\": { \"name\": \"(file: File) => boolean | Promise<File>\" } }, \"onChange\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onChange\", \"required\": false, \"type\": { \"name\": \"(file: File) => void\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/components/Upload/upload.tsx#Upload\"] = { docgenInfo: Upload.__docgenInfo, name: \"Upload\", path: \"src/components/Upload/upload.tsx#Upload\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }try {\n    // @ts-ignore\n    upload.displayName = \"upload\";\n    // @ts-ignore\n    upload.__docgenInfo = { \"description\": \"\", \"displayName\": \"upload\", \"props\": { \"action\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"action\", \"required\": true, \"type\": { \"name\": \"string\" } }, \"onProgress\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onProgress\", \"required\": false, \"type\": { \"name\": \"(percentage: number, file: File) => void\" } }, \"onSuccess\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onSuccess\", \"required\": false, \"type\": { \"name\": \"(data: any, file: File) => void\" } }, \"onError\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onError\", \"required\": false, \"type\": { \"name\": \"(data: any, file: File) => void\" } }, \"beforeUpload\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"beforeUpload\", \"required\": true, \"type\": { \"name\": \"(file: File) => boolean | Promise<File>\" } }, \"onChange\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onChange\", \"required\": false, \"type\": { \"name\": \"(file: File) => void\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/components/Upload/upload.tsx#upload\"] = { docgenInfo: upload.__docgenInfo, name: \"upload\", path: \"src/components/Upload/upload.tsx#upload\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }"]},"metadata":{},"sourceType":"module"}