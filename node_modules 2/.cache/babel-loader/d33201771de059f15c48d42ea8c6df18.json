{"ast":null,"code":"import _objectWithoutProperties from \"/Users/hail/Documents/project/leod/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/hail/Documents/project/leod/src/components/autoComplete/autoComplete.tsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Input from '../Input/input';\nimport classNames from 'classnames';\nimport Icon from '../Icon';\nimport useDebounce from '../../hooks/useDebounce';\nexport const AutoComplete = props => {\n  const {\n    fetchSuggestions,\n    onSelect,\n    value,\n    renderOption\n  } = props,\n        restProps = _objectWithoutProperties(props, [\"fetchSuggestions\", \"onSelect\", \"value\", \"renderOption\"]);\n\n  const [inputValue, setInputValue] = useState(value);\n  const [loading, setLoading] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [highlightIndex, setHighlightIndex] = useState(-1);\n  const triggerSearch = useRef(false);\n  const componentRef = useRef(null);\n  const deBounceValue = useDebounce(inputValue);\n  useEffect(() => {\n    if (deBounceValue && triggerSearch) {\n      const reuslt = fetchSuggestions(deBounceValue);\n\n      if (reuslt instanceof Promise) {\n        setLoading(true);\n        reuslt.then(data => {\n          setLoading(false);\n          setSuggestions(data);\n        });\n      } else {\n        setSuggestions(reuslt);\n      }\n    } else {\n      setSuggestions([]);\n    }\n  }, [deBounceValue, fetchSuggestions]);\n\n  const handleChange = e => {\n    triggerSearch.current = false;\n    const value = e.target.value.trim();\n    setInputValue(value);\n  };\n\n  const handleSeletct = item => {\n    setInputValue(item.value);\n    setSuggestions([]);\n\n    if (onSelect) {\n      onSelect(item);\n    }\n\n    triggerSearch.current = true;\n  };\n\n  const highlight = index => {\n    if (index < 0) index = 0;\n    if (index > suggestions.length - 1) index = suggestions.length - 1;\n    setHighlightIndex(index);\n  };\n\n  const handleKeyDown = e => {\n    switch (e.keyCode) {\n      case 13:\n        if (suggestions.length > 0) {\n          handleSeletct(suggestions[highlightIndex]);\n        }\n\n        break;\n\n      case 38:\n        highlight(highlightIndex - 1);\n        break;\n\n      case 40:\n        highlight(highlightIndex + 1);\n        break;\n\n      case 27:\n        setSuggestions([]);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const renderTemplete = item => {\n    return renderOption ? renderOption(item) : item.value;\n  };\n\n  const generateDropDown = () => {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 12\n      }\n    }, suggestions.map((item, index) => {\n      const cnames = classNames('suggestion-item', {\n        'is-active': index === highlightIndex\n      });\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: index,\n        className: cnames,\n        onClick: () => handleSeletct(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 18\n        }\n      }, renderTemplete(item));\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: \"leod-auto-complete\"\n  }, restProps, {\n    ref: componentRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    value: inputValue,\n    onChange: handleChange,\n    onKeyDown: handleKeyDown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Icon, {\n    icon: ['fas', 'spinner'],\n    size: \"lg\",\n    spin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }), loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"suggstions-loading-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: \"spinner\",\n    spin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })), setSuggestions.length > 0 && generateDropDown());\n};\nAutoComplete.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"AutoComplete\"\n};\nexport default AutoComplete;\n\ntry {\n  // @ts-ignore\n  AutoComplete.displayName = \"AutoComplete\"; // @ts-ignore\n\n  AutoComplete.__docgenInfo = {\n    \"description\": \"\",\n    \"displayName\": \"AutoComplete\",\n    \"props\": {\n      \"fetchSuggestions\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"fetchSuggestions\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"(str: string) => DataSourceObj[] | Promise<DataSourceObj[]>\"\n        }\n      },\n      \"onSelect\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onSelect\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(item: DataSourceObj) => void\"\n        }\n      },\n      \"renderOption\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"renderOption\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(item: DataSourceObj) => ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<...>)>\"\n        }\n      }\n    }\n  }; // @ts-ignore\n\n  if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") // @ts-ignore\n    STORYBOOK_REACT_CLASSES[\"src/components/autoComplete/autoComplete.tsx#AutoComplete\"] = {\n      docgenInfo: AutoComplete.__docgenInfo,\n      name: \"AutoComplete\",\n      path: \"src/components/autoComplete/autoComplete.tsx#AutoComplete\"\n    };\n} catch (__react_docgen_typescript_loader_error) {}\n\ntry {\n  // @ts-ignore\n  autoComplete.displayName = \"autoComplete\"; // @ts-ignore\n\n  autoComplete.__docgenInfo = {\n    \"description\": \"\",\n    \"displayName\": \"autoComplete\",\n    \"props\": {\n      \"fetchSuggestions\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"fetchSuggestions\",\n        \"required\": true,\n        \"type\": {\n          \"name\": \"(str: string) => DataSourceObj[] | Promise<DataSourceObj[]>\"\n        }\n      },\n      \"onSelect\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"onSelect\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(item: DataSourceObj) => void\"\n        }\n      },\n      \"renderOption\": {\n        \"defaultValue\": null,\n        \"description\": \"\",\n        \"name\": \"renderOption\",\n        \"required\": false,\n        \"type\": {\n          \"name\": \"(item: DataSourceObj) => ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<...>)>\"\n        }\n      }\n    }\n  }; // @ts-ignore\n\n  if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") // @ts-ignore\n    STORYBOOK_REACT_CLASSES[\"src/components/autoComplete/autoComplete.tsx#autoComplete\"] = {\n      docgenInfo: autoComplete.__docgenInfo,\n      name: \"autoComplete\",\n      path: \"src/components/autoComplete/autoComplete.tsx#autoComplete\"\n    };\n} catch (__react_docgen_typescript_loader_error) {}\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src/components/autoComplete/autoComplete.tsx\"] = {\n    name: \"AutoComplete\",\n    docgenInfo: AutoComplete.__docgenInfo,\n    path: \"src/components/autoComplete/autoComplete.tsx\"\n  };\n}","map":{"version":3,"sources":["/Users/hail/Documents/project/leod/src/components/autoComplete/autoComplete.tsx"],"names":["AutoComplete","props","restProps","useState","triggerSearch","useRef","componentRef","deBounceValue","useDebounce","useEffect","reuslt","fetchSuggestions","setLoading","data","setSuggestions","handleChange","e","value","setInputValue","handleSeletct","item","onSelect","highlight","index","suggestions","setHighlightIndex","handleKeyDown","highlightIndex","renderTemplete","renderOption","generateDropDown","cnames","classNames","loading","STORYBOOK_REACT_CLASSES","docgenInfo","name","path","autoComplete"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, useEffect, useRef, KeyboardEvent, FC, useState, ReactElement } from 'react'\nimport Input, { InputProps } from '../Input/input'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport classNames from 'classnames';\nimport Icon from '../Icon';\nimport useDebounce from '../../hooks/useDebounce';\ninterface DataSourceObj {\n  value: string\n}\nexport type DataSourceType<T = {}> = T & DataSourceObj\ninterface AutoCompleteProps extends Omit<InputProps, 'onSelect'> {\n  fetchSuggestions: (str: string) => DataSourceType[] | Promise<DataSourceType[]>,\n  onSelect?: (item: DataSourceType) => void,\n  renderOption?: (item: DataSourceType) => ReactElement\n}\n\nexport const AutoComplete: FC<AutoCompleteProps> = (props) => {\n  const {\n    fetchSuggestions,\n    onSelect,\n    value,\n    renderOption,\n    ...restProps\n  } = props\n  const [inputValue, setInputValue] = useState(value)\n  const [loading, setLoading] = useState(false)\n  const [suggestions, setSuggestions] = useState<DataSourceType[]>([])\n  const [highlightIndex, setHighlightIndex] = useState(-1)\n  const triggerSearch = useRef(false)\n  const componentRef = useRef<HTMLDivElement>(null)\n  const deBounceValue = useDebounce(inputValue as string)\n  useEffect(() => {\n    if (deBounceValue && triggerSearch) {\n      const reuslt = fetchSuggestions(deBounceValue)\n      if (reuslt instanceof Promise) {\n        setLoading(true)\n        reuslt.then(data => {\n          setLoading(false)\n          setSuggestions(data)\n        })\n      } else {\n        setSuggestions(reuslt)\n      }\n    } else {\n      setSuggestions([])\n    }\n  }, [deBounceValue, fetchSuggestions])\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    triggerSearch.current = false\n    const value = e.target.value.trim()\n    setInputValue(value)\n\n  }\n  const handleSeletct = (item: DataSourceType) => {\n    setInputValue(item.value)\n    setSuggestions([])\n    if (onSelect) {\n      onSelect(item)\n    }\n    triggerSearch.current = true\n  }\n  const highlight = (index: number) => {\n    if (index < 0) index = 0\n    if (index > suggestions.length - 1) index = suggestions.length - 1\n    setHighlightIndex(index)\n  }\n\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    switch (e.keyCode) {\n      case 13:\n        if (suggestions.length > 0) {\n          handleSeletct(suggestions[highlightIndex])\n        }\n        break\n      case 38:\n        highlight(highlightIndex - 1)\n        break\n      case 40:\n        highlight(highlightIndex + 1)\n        break\n      case 27:\n        setSuggestions([])\n        break\n      default:\n        break\n    }\n  }\n\n  const renderTemplete = (item: DataSourceType) => {\n    return renderOption ? renderOption(item) : item.value\n  }\n\n  const generateDropDown = () => {\n    return < ul >\n      {\n        suggestions.map((item, index) => {\n          const cnames = classNames('suggestion-item', {\n            'is-active': index === highlightIndex\n          })\n          return <li key={index} className={cnames} onClick={() => handleSeletct(item)}>\n            {renderTemplete(item)}\n          </li>\n        }\n        )\n      }\n    </ul >\n  }\n  return <div className=\"leod-auto-complete\" {...restProps} ref={componentRef}>\n    <Input value={inputValue} onChange={handleChange} onKeyDown={handleKeyDown}></Input>\n    <Icon icon={['fas', 'spinner']} size=\"lg\" spin />\n    {\n      loading &&\n      <div className=\"suggstions-loading-icon\">\n        <Icon icon=\"spinner\" spin />\n      </div>\n    }\n    {setSuggestions.length > 0 && generateDropDown()}\n  </div>\n}\nexport default AutoComplete;try {\n    // @ts-ignore\n    AutoComplete.displayName = \"AutoComplete\";\n    // @ts-ignore\n    AutoComplete.__docgenInfo = { \"description\": \"\", \"displayName\": \"AutoComplete\", \"props\": { \"fetchSuggestions\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"fetchSuggestions\", \"required\": true, \"type\": { \"name\": \"(str: string) => DataSourceObj[] | Promise<DataSourceObj[]>\" } }, \"onSelect\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onSelect\", \"required\": false, \"type\": { \"name\": \"(item: DataSourceObj) => void\" } }, \"renderOption\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"renderOption\", \"required\": false, \"type\": { \"name\": \"(item: DataSourceObj) => ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<...>)>\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/components/autoComplete/autoComplete.tsx#AutoComplete\"] = { docgenInfo: AutoComplete.__docgenInfo, name: \"AutoComplete\", path: \"src/components/autoComplete/autoComplete.tsx#AutoComplete\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }try {\n    // @ts-ignore\n    autoComplete.displayName = \"autoComplete\";\n    // @ts-ignore\n    autoComplete.__docgenInfo = { \"description\": \"\", \"displayName\": \"autoComplete\", \"props\": { \"fetchSuggestions\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"fetchSuggestions\", \"required\": true, \"type\": { \"name\": \"(str: string) => DataSourceObj[] | Promise<DataSourceObj[]>\" } }, \"onSelect\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"onSelect\", \"required\": false, \"type\": { \"name\": \"(item: DataSourceObj) => void\" } }, \"renderOption\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"renderOption\", \"required\": false, \"type\": { \"name\": \"(item: DataSourceObj) => ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<...>)>\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/components/autoComplete/autoComplete.tsx#autoComplete\"] = { docgenInfo: autoComplete.__docgenInfo, name: \"autoComplete\", path: \"src/components/autoComplete/autoComplete.tsx#autoComplete\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }"]},"metadata":{},"sourceType":"module"}